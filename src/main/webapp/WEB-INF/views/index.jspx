<html xmlns:spring="http://www.springframework.org/tags" xmlns:util="urn:jsptagdir:/WEB-INF/tags/util"
    xmlns:table="urn:jsptagdir:/WEB-INF/tags/table" xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:fn="http://java.sun.com/jsp/jstl/functions" xmlns:sec="http://www.springframework.org/security/tags"
    xmlns:jsp="http://java.sun.com/JSP/Page">

<jsp:directive.page contentType="text/html;charset=UTF-8" />
<jsp:output omit-xml-declaration="yes" />

<spring:message var="app_name" code="application_name" htmlEscape="false" />

<div class="row">
    <div class="span8">
        <section>
            <h1>
                Your teams
            </h1>
            <div class="content">
                <div class="form-inline" data-component="teams-filter">
                    <label class="radio">
                        <input type="radio" name="show" value="existing" checked="true" />
                        Show used
                    </label>
                    <c:out value=" " />
                    <label class="radio">
                        <input type="radio" name="show" value="all" />
                        Show all
                    </label>
                </div>

                <table class="table table-bordered table-striped">
                    <thead>
                        <tr>
                            <th><spring:message code="label_virtualresourcegroup" /></th>
                            <th class="center cw75"># of Ports</th>
                            <th class="center cw75">Reservations</th>
                            <table:actionsHeader />
                        </tr>
                    </thead>
                    <tbody>
                        <c:forEach items="${teams}" var="team">
                            <c:choose>
                                <c:when test="${team.existing}">
                                    <c:set value="existing" var="row_css" />
                                </c:when>
                                <c:otherwise>
                                    <c:set value="new" var="row_css" />
                                </c:otherwise>
                            </c:choose>
                            <tr class="${row_css}">
                                <table:column item="${team}" property="name" />

                                <td class="center">
                                    <c:choose>
                                        <c:when test="${team.existing}">
                                            <c:out value="${team.numberOfPorts}"/>
                                        </c:when>
                                        <c:otherwise>
                                            -
                                        </c:otherwise>
                                    </c:choose>
                                </td>

                                <td class="center">
                                    <c:choose>
                                        <c:when test="${team.existing}">
                                            <c:out value="${team.reservations}"/>
                                        </c:when>
                                        <c:otherwise>
                                            -
                                        </c:otherwise>
                                    </c:choose>
                                </td>

                                <td class="center">
                                    <c:if test="${team.existing and team.numberOfPorts > 1}">
                                        <spring:url value="/reservations/create" var="new_res_url">
                                        </spring:url>
                                        <a href="${new_res_url}" rel="tooltip" title="New Reservation" data-type="info"><i class="icon-plus"><!--  --></i></a>
                                        <c:out value=" " />
                                    </c:if>
                                    <spring:url value="/request" var="new_vp_url">
                                        <spring:param name="team" value="${team.surfconextGroupId}" />
                                    </spring:url>
                                    <a href="${new_vp_url}" rel="tooltip" title="Request a Virtual Port" data-type="info"><i class="icon-envelope"><!--  --></i></a>
                                </td>
                            </tr>
                        </c:forEach>
                    </tbody>
                </table>
            </div>
        </section>
    </div>
    <div class="span4">
        <section>
            <h2>Welcome to ${app_name}</h2>
            <spring:url var="reservation_url" value="/reservations/create" />
            <spring:url var="request_url" value="/request" />

            <div class="content-dense">
                <h3>New Reservation</h3>
                <p>Click on the <i class="icon-plus"><!--  --></i> icon behind one of your teams to make a reservation.</p>

                <h3>Request a Virtual Port</h3>
                <p>Click on the <i class="icon-envelope"> <!--  --></i> icon behind one of your teams to request a virtual port.<br/> If the team is not in the list select the 'Show all' radio button.</p>
            </div>
        </section>
    </div>
</div>

</html>