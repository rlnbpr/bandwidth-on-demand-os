<html xmlns:jsp="http://java.sun.com/JSP/Page" xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:tiles="http://tiles.apache.org/tags-tiles" xmlns:spring="http://www.springframework.org/tags"
    xmlns:sec="http://www.springframework.org/security/tags" xmlns:menu="urn:jsptagdir:/WEB-INF/tags/menu"
    xmlns:util="urn:jsptagdir:/WEB-INF/tags/util">

    <jsp:output doctype-root-element="HTML" doctype-system="about:legacy-compat" />
    
    <jsp:directive.page contentType="text/html;charset=UTF-8" />
    <jsp:directive.page pageEncoding="UTF-8" />
    
    <spring:message code="application_name" var="app_name" htmlEscape="false" />
    <spring:url var="banner" value="/resources/images/surfnet_logo.gif" />
    <spring:url var="home" value="/" />
    
    <spring:message code="button_home" var="home_label" htmlEscape="false" />
    <spring:message var="app_name" code="application_name" htmlEscape="false" />
    
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=8" />

        <util:load-scripts />

        <title><spring:message code="welcome_h3" arguments="${app_name}" /></title>
    </head>

    <body>
        <div class="wrapper">
            <header>
                <h1>${app_name}</h1>
            </header>
            
             <section class="user-box content-dense">
                <span class="user-name"><sec:authentication property="principal.displayName" htmlEscape="false"/></span>
            		
                <a href="#" class="logout">Logout <i class="icon-signout"><!-- --></i></a>

               <div class="dropdown">
                     <sec:authentication property='principal.selectedRole'  var="selectedRole" />
                     <spring:message  code="role_class_${selectedRole.roleName}" var="s_role_class"/>                     
                    <div class="dropdown-toggle ${s_role_class}" data-toggle="dropdown">
                    	  <input id="roleId" type="hidden" value="${selectedRole.groupId}"/>
                        <span class="user-icon"><!--  --></span>
                        <span class="user-title"><span class="user-title"><spring:message  code="role_${selectedRole.roleName}"/></span>                            
                        </span>
                        <b class="caret"><!--  --></b>
                        <span class="user-group"><sec:authentication property="principal.selectedRole.instituteName"/></span>
                    </div>

                    <ul class="dropdown-menu">
	                     <sec:authentication property="principal.bodRoles"  var="bodRoles"/>
	                    	 <c:forEach items="${bodRoles}" var="bodRole">	                    	  
		                     	  <spring:message  code="role_class_${bodRole.roleName}" var="role_class"/>
		                    
		                        <li class="${role_class}">
		                            <a href="#">
		                                <span class="user-icon"><!--  --></span>
		                                <span class="user-title"><spring:message  code="role_${bodRole.roleName}"/></span>
		                                <span class="user-group"><c:out value="${bodRole.instituteName}"/></span>
		                            </a>
		                        </li>         
	                     </c:forEach>               
                    </ul>
                </div>
            </section>
            
            <!--  -->
            <nav class="navbar">
                <div class="navbar-inner">
                    <div class="container">
                        <tiles:insertAttribute name="menubar" ignore="true" />
                    </div>
                </div>
            </nav>

            <div class="messagebar">
                <div id="messages">                	  
                    <c:forEach items="${infoMessages}" var="infoMessage">
                        <div class="alert-message info" data-alert="true">
                            <a class="close" href="#">&amp;times;</a>
                            <p style='display: inline'><c:out value="${infoMessage}" escapeXml="false"/></p>
                        </div>
                    </c:forEach>
                </div>
            </div>
            <div class="container">            		            		
                <tiles:insertAttribute name="body" />
            </div>

            <footer>
                <div class="content-some-dense">
                    SURFnet bv | Postbus 190-35, 3501 DA Utrecht | T +31 302 305 305 | F +31 302 305 329 | <a href="mailto:admin@surfnet.nl">Admin@SURFnet.nl</a>
                </div>
            </footer>

        </div>
    </body>
</html>
